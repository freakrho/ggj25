[gd_scene load_steps=13 format=3 uid="uid://boyvlj5d00fvw"]

[ext_resource type="Script" path="res://scripts/minigame.gd" id="1_gh2j6"]
[ext_resource type="Texture2D" uid="uid://b2drdfwq51qe" path="res://Assets/sketch fondos/oficina.jpg" id="2_fbwkt"]
[ext_resource type="Script" path="res://scripts/choose_cup_condition.gd" id="3_5wyyl"]
[ext_resource type="Script" path="res://scripts/minigame_conditions/press_button_condition.gd" id="4_acbkj"]
[ext_resource type="Script" path="res://scripts/area_selectable.gd" id="4_djsoj"]
[ext_resource type="Script" path="res://scripts/drag_object_to_target_condition.gd" id="5_sqles"]
[ext_resource type="Script" path="res://scripts/slideable.gd" id="7_67bin"]

[sub_resource type="CircleShape2D" id="CircleShape2D_mgrav"]
radius = 106.075

[sub_resource type="Curve2D" id="Curve2D_ujweb"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 185, -2, 0, 0, 0, 0, -1, 2)
}
point_count = 2

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_w86d2"]
size = Vector2(65, 33)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_fjade"]
size = Vector2(64, 34)

[sub_resource type="CircleShape2D" id="CircleShape2D_hvr3x"]
radius = 52.0384

[node name="CoffeeMinigame" type="Node2D" node_paths=PackedStringArray("sorted_conditions")]
script = ExtResource("1_gh2j6")
sorted_conditions = [NodePath("Conditions/ChooseCup"), NodePath("Conditions/GrindBeans"), NodePath("Conditions/PutPortafilter")]

[node name="Sprite2D" type="Sprite2D" parent="."]
position = Vector2(-981, 768)
scale = Vector2(2.64565, 2.64565)
texture = ExtResource("2_fbwkt")

[node name="Conditions" type="Node" parent="."]

[node name="ChooseCup" type="Node" parent="Conditions" node_paths=PackedStringArray("choices")]
script = ExtResource("3_5wyyl")
choices = [NodePath("../../Cups/Cup1"), NodePath("../../Cups/Cup2"), NodePath("../../Cups/Cup3")]

[node name="GrindBeans" type="Node" parent="Conditions" node_paths=PackedStringArray("button")]
script = ExtResource("4_acbkj")
button = NodePath("../../Grinder")

[node name="PutPortafilter" type="Node" parent="Conditions" node_paths=PackedStringArray("slideable", "target", "depends_on")]
script = ExtResource("5_sqles")
reset_if_failed = true
slideable = NodePath("../../Portafilter")
target = NodePath("../../Portafilter/Target")
depends_on = [NodePath("../GrindBeans")]

[node name="Cups" type="Node2D" parent="."]

[node name="Cup1" type="Area2D" parent="Cups"]
position = Vector2(539, 109)
script = ExtResource("4_djsoj")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Cups/Cup1"]
shape = SubResource("CircleShape2D_mgrav")

[node name="Cup2" type="Area2D" parent="Cups"]
position = Vector2(795, 148)
script = ExtResource("4_djsoj")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Cups/Cup2"]
shape = SubResource("CircleShape2D_mgrav")

[node name="Cup3" type="Area2D" parent="Cups"]
position = Vector2(1048, 163)
script = ExtResource("4_djsoj")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Cups/Cup3"]
shape = SubResource("CircleShape2D_mgrav")

[node name="Grinder" type="Button" parent="."]
offset_left = 1469.0
offset_top = 709.0
offset_right = 1639.0
offset_bottom = 1014.0

[node name="Portafilter" type="Node2D" parent="." node_paths=PackedStringArray("path", "knob")]
position = Vector2(1022, 752)
script = ExtResource("7_67bin")
path = NodePath("Path2D")
knob = NodePath("Area2D")
max_delta = 200.0

[node name="Path2D" type="Path2D" parent="Portafilter"]
curve = SubResource("Curve2D_ujweb")

[node name="Area2D" type="Area2D" parent="Portafilter"]
position = Vector2(185, 0)

[node name="Sprite2D" type="Sprite2D" parent="Portafilter/Area2D"]
texture = SubResource("PlaceholderTexture2D_w86d2")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Portafilter/Area2D"]
shape = SubResource("RectangleShape2D_fjade")
debug_color = Color(0.291997, 0.587894, 0.626193, 0.42)

[node name="Target" type="Area2D" parent="Portafilter"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Portafilter/Target"]
shape = SubResource("CircleShape2D_hvr3x")
